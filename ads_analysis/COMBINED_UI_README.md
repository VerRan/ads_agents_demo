# 🚀 AI广告分析套件 - 综合UI

这是一个集成了网站分析、浏览器自动化和视频分类功能的综合广告分析工具。它将原本分散的三个功能模块整合到一个统一的用户界面中，提供一站式的广告分析解决方案。

## ✨ 主要功能

### 1. 📊 网站深度分析
- **产品分析**: 深入了解产品定位、特点、产品线、价格策略
- **竞品分析**: 识别主要竞争对手，比较差异和优势  
- **市场分析**: 了解市场规模、趋势和机会
- **受众分析**: 分析目标受众特征和行为
- **量化数据**: 提供客观事实和数据支撑

### 2. 🤖 浏览器自动化
- **AI驱动**: 使用Amazon Bedrock Claude模型驱动浏览器操作
- **自动化任务**: 执行复杂的网站分析和数据收集任务
- **可视化操作**: 实时查看浏览器执行过程
- **灵活配置**: 可调整执行步数和浏览器窗口大小

### 3. 🎬 视频内容分析
- **内容理解**: 使用Amazon Nova Pro理解视频内容
- **智能分类**: 将视频分类到278个预定义类别中
- **多种输入**: 支持文件上传、URL输入和聊天分析
- **实时处理**: 快速分析和分类视频内容

### 4. 📈 综合分析报告
- **数据整合**: 整合所有分析模块的结果
- **策略建议**: 生成完整的广告投放策略
- **报告导出**: 支持Markdown格式报告下载

### 5. 💬 智能聊天助手
- **多功能对话**: 支持各种广告分析相关问题
- **智能路由**: 根据用户需求推荐合适的功能模块
- **上下文理解**: 基于对话历史提供个性化建议

## 🛠️ 技术架构

### 核心技术栈
- **前端**: Streamlit (Python Web框架)
- **AI模型**: 
  - Amazon Bedrock Claude 3.7 Sonnet (浏览器自动化)
  - Amazon Nova Pro (视频分析)
  - Strands Agent Framework (网站分析)
- **数据源**: EXA API (网站内容搜索)
- **浏览器自动化**: browser-use库
- **视频处理**: FFmpeg, OpenCV

### 系统架构图
```
┌─────────────────┐    ┌──────────────────┐    ┌─────────────────┐
│   Streamlit UI  │────│  Combined Logic  │────│  Analysis APIs  │
└─────────────────┘    └──────────────────┘    └─────────────────┘
         │                       │                       │
         │                       ├─────────────────────────────┐
         │                       │                             │
         ▼                       ▼                             ▼
┌─────────────────┐    ┌──────────────────┐    ┌─────────────────┐
│  User Interface │    │   Agent Manager  │    │   External APIs │
│  - Navigation   │    │  - Ads Analysis  │    │  - EXA API      │
│  - Input Forms  │    │  - Browser Auto  │    │  - AWS Bedrock  │
│  - Results      │    │  - Video Class   │    │  - Nova Pro     │
└─────────────────┘    └──────────────────┘    └─────────────────┘
```

## 📋 安装和配置

### 1. 环境要求
- Python 3.8+
- FFmpeg (用于视频处理)
- Chrome/Chromium浏览器 (用于浏览器自动化)

### 2. 依赖安装
```bash
# 安装Python依赖
pip install -r combined_requirements.txt

# 安装FFmpeg (macOS)
brew install ffmpeg

# 安装FFmpeg (Ubuntu)
sudo apt update && sudo apt install ffmpeg
```

### 3. 环境变量配置
```bash
# EXA API配置
export API_KEY="your-exa-api-key"

# AWS配置
export AWS_ACCESS_KEY_ID="your-aws-access-key"
export AWS_SECRET_ACCESS_KEY="your-aws-secret-key"
export AWS_DEFAULT_REGION="us-east-1"
```

### 4. 启动应用
```bash
# 方法1: 使用启动脚本
python run_combined_ui.py

# 方法2: 直接运行Streamlit
streamlit run combined_ads_ui.py
```

## 🎯 使用指南

### 网站深度分析
1. 选择"网站深度分析"模式
2. 输入目标网站URL
3. 选择分析内容（产品、竞品、市场、受众）
4. 点击"开始深度分析"
5. 等待分析完成并查看结果
6. 可选择下载分析报告

### 浏览器自动化
1. 选择"浏览器自动化"模式
2. 描述要执行的任务
3. 配置执行参数（步数、窗口大小）
4. 点击"启动自动化任务"
5. 观察浏览器执行过程
6. 查看执行结果

### 视频内容分析
1. 选择"视频内容分析"模式
2. 选择输入方式：
   - 上传视频文件
   - 输入视频URL
   - 使用智能分析对话
3. 等待分析完成
4. 查看内容理解和分类结果

### 综合分析报告
1. 完成至少一个分析模块
2. 选择"综合分析报告"模式
3. 查看已完成的分析结果
4. 点击"生成综合报告"
5. 下载完整的策略报告

### 智能聊天助手
1. 选择"智能聊天助手"模式
2. 输入问题或需求
3. 获得智能建议和功能推荐
4. 根据建议切换到相应功能模块

## 🔧 配置选项

### 分析配置
- **网站分析**: 可选择分析维度（产品/竞品/市场/受众）
- **浏览器自动化**: 可调整最大执行步数和窗口大小
- **视频分析**: 支持多种视频格式和输入方式

### 输出配置
- **报告格式**: Markdown格式，便于编辑和分享
- **文件命名**: 基于分析目标自动生成文件名
- **结果存储**: 会话期间保持分析结果

## 🚨 故障排除

### 常见问题

1. **环境变量未设置**
   ```
   错误: Missing required environment variables
   解决: 确保设置了API_KEY和AWS相关环境变量
   ```

2. **视频处理错误**
   ```
   错误: Width/height not divisible by 2
   解决: 使用FFmpeg转换视频格式或调整分辨率
   ```

3. **浏览器自动化失败**
   ```
   错误: Browser initialization failed
   解决: 确保安装了Chrome浏览器和相关依赖
   ```

4. **API调用失败**
   ```
   错误: EXA API authentication failed
   解决: 检查API_KEY是否正确设置
   ```

### 性能优化
- **内存使用**: 大视频文件可能占用较多内存
- **网络延迟**: 网站分析速度取决于网络连接
- **并发限制**: 避免同时运行多个分析任务

## 📊 功能对比

| 功能模块 | 输入类型 | 处理时间 | 输出格式 | 主要用途 |
|---------|---------|---------|---------|---------|
| 网站分析 | URL | 2-5分钟 | Markdown报告 | 投前分析 |
| 浏览器自动化 | 任务描述 | 5-15分钟 | 执行结果 | 数据收集 |
| 视频分析 | 视频文件/URL | 1-3分钟 | 分类结果 | 内容理解 |
| 综合报告 | 分析结果 | 1-2分钟 | 策略报告 | 决策支持 |

## 🔮 未来规划

### 短期目标
- [ ] 添加更多视频分类类别
- [ ] 优化浏览器自动化性能
- [ ] 增加数据可视化图表
- [ ] 支持批量分析功能

### 长期目标
- [ ] 集成更多AI模型
- [ ] 添加实时监控功能
- [ ] 支持多语言界面
- [ ] 开发移动端应用

## 🤝 贡献指南

欢迎提交Issue和Pull Request来改进这个项目！

### 开发环境设置
```bash
git clone <repository-url>
cd ads_demo/ads_agents_demo/ads_analysis
pip install -r combined_requirements.txt
```

### 代码规范
- 使用Python PEP 8编码规范
- 添加适当的注释和文档字符串
- 确保所有功能都有错误处理

## 📄 许可证

本项目采用MIT许可证，详见LICENSE文件。

## 📞 支持

如有问题或建议，请通过以下方式联系：
- 提交GitHub Issue
- 发送邮件至项目维护者
- 参与项目讨论区

---

🚀 **开始使用AI广告分析套件，让数据驱动您的广告决策！**
