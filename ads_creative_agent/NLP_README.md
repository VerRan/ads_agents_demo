# 🤖 自然语言处理功能说明

## 概述
广告创意Agent现在支持自然语言输入，你可以用中文或英文描述任务，系统会自动解析并执行。

## 🚀 快速开始

### 启动UI
```bash
python run_nlp_ui.py
```

### 基本使用
1. 在"自然语言任务输入"框中描述你的需求
2. 点击"执行任务"自动完成
3. 查看实时处理日志和结果

## 📝 支持的任务类型

### 1. 虚拟试穿
**关键词**: 试穿、try on、换衣服、穿上

**示例**:
```
用lht.jpg作为源图片，下载这个衣服图片并进行虚拟试穿：https://fakestoreapi.com/img/71YXzeOuslL._AC_UY879_.jpg

用我的照片试穿这个连衣裙：https://example.com/dress.jpg

Try on these pants with lht.jpg: https://example.com/pants.jpg
```

### 2. 图片下载
**关键词**: 下载、download、获取

**示例**:
```
下载这些图片：https://site1.com/img1.jpg 和 https://site2.com/img2.png

Download this shirt: https://example.com/shirt.jpg
```

### 3. 图片处理
**关键词**: 处理、process、调整、resize

**示例**:
```
处理这个图片：test.png，调整尺寸

Process and resize: https://example.com/large-image.jpg
```

## 🎯 智能识别功能

### 服装类型自动识别
- **连衣裙/dress** → FULL_BODY
- **裤子/pants/trousers** → LOWER_BODY  
- **配饰/accessories/帽子/眼镜** → ACCESSORIES
- **默认** → UPPER_BODY

### 图片智能分配
- 自动识别人物照片和衣服图片
- 智能分配源图片和参考图片
- 单张图片时给出明确指导

## 📋 任务执行流程

1. **任务解析**: 识别动作类型、提取URL和文件名
2. **图片收集**: 查找本地文件 → 下载URL图片
3. **智能分配**: 自动设置源图片和参考图片
4. **执行操作**: 根据任务类型执行相应操作
5. **结果展示**: 显示处理结果和下载链接

## 🔧 故障排除

### 常见问题

**Q: 提示"本地文件未找到"**
A: 这是正常的，系统会先尝试查找本地文件，如果没找到会从URL下载

**Q: 虚拟试穿需要2张图片**
A: 确保提供人物照片和衣服图片，可以是本地文件或URL

**Q: 下载失败**
A: 检查URL是否有效，网络是否正常

### 日志说明
- `✅` 表示操作成功
- `❌` 表示操作失败  
- `⚠️` 表示警告信息
- `📥` 表示正在下载
- `🎨` 表示正在处理

## 💡 最佳实践

### 1. 描述清晰的任务
```
好的示例: "用lht.jpg试穿这个衣服：https://example.com/shirt.jpg"
避免: "处理图片"
```

### 2. 提供完整信息
- 包含具体的文件名或URL
- 说明想要的操作类型
- 指定服装类型（如需要）

### 3. 使用示例任务
- 点击"示例任务"查看模板
- 根据示例修改为你的需求

## 🌟 高级功能

### 混合任务
可以在一个任务中组合多个操作：
```
下载这个衣服图片：https://example.com/shirt.jpg，然后用lht.jpg进行虚拟试穿
```

### 批量处理
支持处理多个URL：
```
下载这些图片：https://site1.com/img1.jpg 和 https://site2.com/img2.png
```

### 自动类型识别
系统会根据关键词自动识别服装类型和操作类型，无需手动指定。

---

## 🆘 需要帮助？

如果遇到问题，可以：
1. 点击"解析任务"查看系统如何理解你的输入
2. 查看处理日志了解执行过程
3. 使用示例任务作为参考